{"code":"!function(e){var t={};function n(c){if(t[c])return t[c].exports;var i=t[c]={i:c,l:!1,exports:{}};return e[c].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,c){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:c})},n.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var c=Object.create(null);if(n.r(c),Object.defineProperty(c,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var i in e)n.d(c,i,function(t){return e[t]}.bind(null,i));return c},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,\"a\",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p=\"\",n(n.s=1)}([,function(e,t,n){\"use strict\";n.r(t);const c=n(2),i=document.getElementById(\"canvas\"),o=document.querySelector(\".mainColor\"),s=i.getContext(\"2d\"),r=\"lightgray\";s.fillStyle=r,s.fillRect(0,0,i.width,i.height);const l=document.querySelector(\".main__frames\"),a=document.querySelector(\".addNewFrame\"),d=[];let u=1;const f=JSON.parse(localStorage.getItem(\"stateObject\")),h={},[m,g]=[c.areArraysEqual,c.getRandomInt];function p(){const e=i.toDataURL(),t=new Image;t.src=e,d[u-1]?d[u-1]=t:d.push(t),l.children[u-1].style.backgroundImage=`url(${e})`}function v(e){p();const t=d[e-1];u=e,s.clearRect(0,0,i.width,i.height),s.drawImage(t,0,0)}function y(){p();const e=document.querySelector(\".frame\").cloneNode(!0);e.classList.contains(\"firstFrame\")&&e.classList.remove(\"firstFrame\"),e.children[0].innerText=Number(l.children[l.children.length-2].children[0].innerText)+1,l.insertBefore(e,l.children[l.children.length-1]),u=l.children.length-1,s.clearRect(0,0,i.width,i.height),s.fillStyle=r,s.fillRect(0,0,i.width,i.height),v(u)}function L(e){const t=document.querySelectorAll(\".frame\")[e-1].cloneNode(!0);t.classList.contains(\"firstFrame\")&&t.classList.remove(\"firstFrame\"),s.clearRect(0,0,i.width,i.height),t.children[0].innerText=l.children.length,l.insertBefore(t,l.children[l.children.length-1]),u=l.children.length-1,s.drawImage(d[e-1],0,0),p()}function w(e){if(l.children.length>2){e===u?d.length===u?v(u-1):d.length>u&&(v(u+1),u-=1):e<u&&(u-=1),l.children[e-1].remove(),d.splice(e-1,1);for(let e=0;e<l.children.length-1;e+=1)l.children[e].classList.contains(\"frame\")&&(l.children[e].children[0].innerText=e+1)}}a.addEventListener(\"click\",y),l.addEventListener(\"click\",function(e){e.target.classList.contains(\"numberOfFrame\")?v(Number(e.target.innerText)):e.target.classList.contains(\"frame\")?v(Number(e.target.children[0].innerText)):e.target.classList.contains(\"duplicateIcon\")?L(e.target.parentElement.children[0].innerText):e.target.classList.contains(\"deleteIcon\")&&w(e.target.parentElement.children[0].innerText)}),p();const k=document.querySelector(\".FPS\");let b=null;const S=document.querySelector(\".showAnimation\");let E=0;function I(e,t){S.innerHTML=\"\",e[E].classList.contains(\"AnimationImg\")||e[E].classList.add(\"AnimationImg\"),S.appendChild(e[E]),E===e.length-1?m(e,d)&&t===k.value?E=0:(E=0,P()):E+=1}function P(){const e=d.slice();let t=k.value;t<1?t=1:t>24&&(t=24),clearInterval(b),b=window.setInterval(I,1e3/t,e,t)}P();const K=document.querySelector(\".FullscreenButton\");K.addEventListener(\"click\",function(){\"\"!==S.innerHTML&&S.requestFullscreen()});const R=document.querySelector(\".size-picker-container\");let x=1,q=R.children[0];R.addEventListener(\"click\",function(e){e.target.parentElement===R&&(x=e.target.attributes[1].value,q.classList.remove(\"selected\"),(q=e.target).classList.add(\"selected\"))});const T=document.querySelector(\".main__pallete__tool-picker\"),M=[];let F,O=!1,X=0,Y=0,_=i.clientWidth/i.width;function j(e){X=e.offsetX,Y=e.offsetY}function A(e){j(e),O=!0}function C(e){!0===O&&(B(s,X,Y,e.offsetX,e.offsetY),j(e))}function N(e){!0===O&&(B(s,X,Y,e.offsetX,e.offsetY),X=0,Y=0,O=!1)}function B(e,t,n,c,i){e.beginPath(),e.strokeStyle=o.value,e.lineWidth=x,e.moveTo(t/_,n/_),e.lineTo(c/_,i/_),e.stroke(),e.closePath()}function W(){i.addEventListener(\"mousedown\",A),i.addEventListener(\"mousemove\",C),i.addEventListener(\"mouseup\",N),M.push([\"mousedown\",A]),M.push([\"mousemove\",C]),M.push([\"mouseup\",N])}function z(){s.fillStyle=o.value,s.fillRect(0,0,i.width,i.height)}function $(e){j(e),O=!0}function D(e){!0===O&&(J(s,X,Y,e.offsetX,e.offsetY),j(e))}function H(e){!0===O&&(J(s,X,Y,e.offsetX,e.offsetY),X=0,Y=0,O=!1)}function J(e,t,n,c,i){e.beginPath(),e.strokeStyle=r,e.lineWidth=10*x,e.moveTo(t/_,n/_),e.lineTo(c/_,i/_),e.stroke(),e.closePath()}function G(){i.addEventListener(\"mousedown\",$),i.addEventListener(\"mousemove\",D),i.addEventListener(\"mouseup\",H),M.push([\"mousedown\",$]),M.push([\"mousemove\",D]),M.push([\"mouseup\",H])}function U(e){j(e),O=!0}function Q(e){!0===O&&(B(s,X,Y,e.offsetX,e.offsetY),O=!1)}function V(){i.addEventListener(\"mousedown\",U),i.addEventListener(\"mouseup\",Q),M.push([\"mousedown\",U]),M.push([\"mouseup\",Q])}function Z(e){j(e),O=!0}function ee(e){!0===O&&(!function(e,t,n,c,i){const s=c-t,r=i-n;e.beginPath(),e.strokeStyle=o.value,e.lineWidth=x,e.strokeRect(parseInt(t/_,10),parseInt(n/_,10),parseInt(s/_,10),parseInt(r/_,10)),e.closePath()}(s,X,Y,e.offsetX,e.offsetY),O=!1)}function te(e){!0===O&&(!function(e,t,n,c,i){const s=c-t,r=i-n;e.fillStyle=o.value,e.fillRect(parseInt(t/_,10),parseInt(n/_,10),parseInt(s/_,10),parseInt(r/_,10))}(s,X,Y,e.offsetX,e.offsetY),O=!1)}function ne(){i.addEventListener(\"mousedown\",Z),i.addEventListener(\"mouseup\",ee),M.push([\"mousedown\",Z]),M.push([\"mouseup\",ee])}function ce(){i.addEventListener(\"mousedown\",Z),i.addEventListener(\"mouseup\",te),M.push([\"mousedown\",Z]),M.push([\"mouseup\",te])}function ie(e){j(e),O=!0}function oe(e){!0===O&&(!function(e,t,n,c,i){let s;c<t&&(s=c,c=t,t=s);i<n&&(s=i,i=n,n=s);e.strokeStyle=o.value,e.lineWidth=x,e.beginPath(),e.arc((c+t)/2/_,(i+n)/2/_,(c-t)/2/_,0,2*Math.PI),e.stroke(),e.closePath()}(s,X,Y,e.offsetX,e.offsetY),O=!1)}function se(e){!0===O&&(!function(e,t,n,c,i){let s;c<t&&(s=c,c=t,t=s);i<n&&(s=i,i=n,n=s);e.beginPath(),e.arc((c+t)/2/_,(i+n)/2/_,(c-t)/2/_,0,2*Math.PI),e.fillStyle=o.value,e.fill(),e.closePath()}(s,X,Y,e.offsetX,e.offsetY),O=!1)}function re(){i.addEventListener(\"mousedown\",ie),i.addEventListener(\"mouseup\",oe),M.push([\"mousedown\",ie]),M.push([\"mouseup\",oe])}function le(){i.addEventListener(\"mousedown\",ie),i.addEventListener(\"mouseup\",se),M.push([\"mousedown\",ie]),M.push([\"mouseup\",se])}function ae(e){!0===O&&(!function(e,t,n,c,i){let s=!1;t<c&&(s=!0),e.strokeStyle=o.value,e.lineWidth=x,e.beginPath();const r=Math.abs(i-n)/2,l=r*r/(Math.sqrt((c-t)**2+(i-n)**2)/2),a=Math.sqrt(r*r-l*l),d=Math.acos(a/r);e.arc((c+t)/2/_,(i+n)/2/_,r/_,d,Math.PI+d,s),e.stroke(),e.closePath()}(s,X,Y,e.offsetX,e.offsetY),O=!1)}function de(){i.addEventListener(\"mousedown\",ie),i.addEventListener(\"mouseup\",ae),M.push([\"mousedown\",ie]),M.push([\"mouseup\",ae])}function ue(){s.fillStyle=r,s.fillRect(0,0,i.width,i.height)}function fe(){for(let e=20*x;e>0;e-=1){const e=20*x,t=g(-e,e),n=g(-e,e);s.fillStyle=o.value,s.fillRect((X+t)/_,(Y+n)/_,1,1)}}function he(e){j(e),O=!0,s.lineCap=\"round\",s.lineJoin=\"round\",F=setInterval(fe,50)}function me(e){!0===O&&j(e)}function ge(){!0===O&&(clearInterval(F),O=!1)}function pe(){i.addEventListener(\"mousedown\",he),i.addEventListener(\"mousemove\",me),i.addEventListener(\"mouseup\",ge),M.push([\"mousedown\",he]),M.push([\"mousemove\",me]),M.push([\"mouseup\",ge])}T.addEventListener(\"click\",function(e){if(e.target.parentElement===T)switch(M.forEach(e=>{i.removeEventListener(e[0],e[1])}),e.target.classList[1]){case\"pen\":W();break;case\"fillAllPixels\":z();break;case\"eraser\":G();break;case\"stroke\":V();break;case\"rectange\":ne();break;case\"filledRectange\":ce();break;case\"circle\":re();break;case\"filledCircle\":le();break;case\"halfCircle\":de();break;case\"clear\":ue();break;case\"spray\":pe()}});const ve=document.querySelector(\".canvas-size-container\");let ye=32,Le=ve.children[0];function we(e){ye=e,i.width=ye,i.height=ye,_=i.clientWidth/i.width,s.fillStyle=r,s.fillRect(0,0,i.width,i.height),s.drawImage(d[u-1],0,0),p(),function(){s.fillStyle=r;const e=u;for(let e=0;e<d.length;e+=1){const t=d[e];u=e+1,s.fillRect(0,0,i.width,i.height),s.drawImage(t,0,0),p()}v(e)}(),s.fillRect(0,0,i.width,i.height)}document.onresize=function(){_=i.clientWidth/i.width},ve.addEventListener(\"click\",function(e){e.target.parentElement===ve&&(Le.classList.remove(\"selected\"),(Le=e.target).classList.add(\"selected\")),we(e.target.attributes[1].value)}),window.addEventListener(\"unload\",function(){h.imgs=[],d.forEach(e=>{h.imgs.push(e.src)}),h.penSize=String(x),h.currentCanvasSize=String(ye),localStorage.removeItem(\"stateObject\"),localStorage.setItem(\"stateObject\",JSON.stringify(h))}),window.addEventListener(\"load\",function(){switch(q.classList.remove(\"selected\"),Le.classList.remove(\"selected\"),f.penSize){case\"1\":q=R.children[0],x=1,q.classList.add(\"selected\");break;case\"2\":q=R.children[1],x=2,q.classList.add(\"selected\");break;case\"3\":q=R.children[2],x=3,q.classList.add(\"selected\");break;case\"4\":q=R.children[3],x=4,q.classList.add(\"selected\");break;default:q=R.children[0],x=1,q.classList.add(\"selected\")}switch(f.currentCanvasSize){case\"32\":(Le=ve.children[0]).classList.add(\"selected\");break;case\"64\":(Le=ve.children[1]).classList.add(\"selected\"),i.width=64,i.height=64;break;case\"128\":(Le=ve.children[2]).classList.add(\"selected\"),i.width=128,i.height=128;break;default:(Le=ve.children[0]).classList.add(\"selected\")}s.fillStyle=r,s.fillRect(0,0,i.width,i.height)});const ke=document.querySelector(\".coords\");i.addEventListener(\"mousemove\",function(e){ke.innerText=`[${ye}x${ye}] ${parseInt(e.offsetX/_,10)}:${parseInt(e.offsetY/_,10)}`});const be=document.querySelector(\".downloadButton\");be.addEventListener(\"click\",function(){const e=new GIFEncoder;e.setRepeat(0),e.setDelay(1e3/k.value),e.start();const t=document.createElement(\"canvas\");t.width=ye,t.height=ye;const n=t.getContext(\"2d\");for(let t=0;t<d.length;t+=1)n.clearRect(0,0,i.width,i.height),n.drawImage(d[t],0,0),e.addFrame(n);e.finish(),e.download(\"download.gif\")}),document.onkeyup=function(e){\"KeyP\"===e.code?W():e.shiftKey&&\"KeyN\"===e.code?L(u):e.shiftKey&&\"KeyB\"===e.code?w(u):e.shiftKey&&\"Equal\"===e.code?32==ye?ve.children[1].click():64==ye&&ve.children[2].click():e.shiftKey&&\"Minus\"===e.code?64==ye?ve.children[0].click():128==ye&&ve.children[1].click():\"BracketRight\"===e.code?1==x?R.children[1].click():2==x?R.children[2].click():3==x&&R.children[3].click():\"BracketLeft\"===e.code?2==x?R.children[0].click():3==x?R.children[1].click():4==x&&R.children[2].click():e.ctrlKey&&\"KeyS\"===e.code?be.click():e.ctrlKey&&\"KeyF\"===e.code?K.click():\"ArrowUp\"===e.code&&u<l.children.length-1?v(u+1):\"ArrowDown\"===e.code&&u>1?v(u-1):\"KeyF\"===e.code?z():\"KeyE\"===e.code?G():\"KeyS\"===e.code?pe():\"KeyT\"===e.code?V():\"KeyR\"===e.code?ne():\"KeyG\"===e.code?ce():\"KeyA\"===e.code?re():\"KeyD\"===e.code?le():\"KeyH\"===e.code?de():\"KeyC\"===e.code?ue():\"KeyN\"===e.code&&y()}},function(e,t){e.exports.areArraysEqual=function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n+=1)if(e[n]!==t[n])return!1;return!0},e.exports.getRandomInt=function(e,t){return Math.floor(Math.random()*(t-e+1))+e}}]);","extractedComments":[]}